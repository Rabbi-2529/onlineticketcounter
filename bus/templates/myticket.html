
{% extends 'base.html' %}
{% load static %}
{% block custom_css %}
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css" integrity="sha512-9YHSK59/rjvhtDcY/b+4rdnl0V4LPDWdkKceBl8ZLF5TB6745ml1AfluEU6dFWqwDw9lPvnauxFgpKvJqp7jiQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css" integrity="sha512-SgaqKKxJDQ/tAUAAXzvxZz33rmn7leYDYfBP+YoMRSENhf3zJyx3SBASt/OfeQwBHA1nxMis7mM3EV/oYT6Fdw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/myticket.css' %}">
{% endblock custom_css %}


{% block content %}

<section class="about-banner relative">
    <div class="overlay overlay-bg"></div>
    <div class="container">
    <div class="row d-flex align-items-center justify-content-center">
        <div class="about-content col-lg-12">

            <br>
          
        <h1 class="text-white">Profile </h1>
        <p class="text-white link-nav">
        
            <a href={% url "about" %}> Manage My Account</a>
            <span class="lnr lnr-arrow-right"></span>
            <a href={% url "about" %}> Profile Setting</a>
        </p>
        </div>
    </div>
    </div>
    <br><br>
</section>

<div class="container-xl px-4 mt-4">
    <!-- Account page navigation-->
    <!--<div class="page-header d-flex justify-content-center col-lg-12 col-md-12 col-12 mb-4">
        <h4 class="my-auto">Profile settings</h4>
    </div>-->
    <div class="card-body">
        {% if messages %}
          <div class="messages">
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
    </div>
    
    <div class="w-100">
        <div class="row card-container-row">
            <div class="col-xl-4 p-3 card-container">
                <div class="row">
                    <!-- Profile picture card-->
                    <div class="card mb-4 mb-xl-0 px-0">
                        <div class="card-header profile-pic-header d-flex justify-content-center">Profile Picture</div>
                        <div class="card-body text-center">
                            <!-- Profile picture image-->
                            <div class="d-flex justify-content-center pb-4">
                                <div class="profile-pic-div">
                                    {% if user.profile_picture %}
                                        <img id="wizardPicturePreview" class="img-account-profile picture-src mb-2" src="{{ user.profile_picture.url }}" alt="http://bootdey.com/img/Content/avatar/avatar1.png">
                                    {% else %}
                                        <img id="wizardPicturePreview" class="img-account-profile picture-src mb-2" src="http://bootdey.com/img/Content/avatar/avatar1.png" alt="">
                                    {% endif %}
                                </div>
                            </div>

                            <div class="short-menu">
                                <div class="p-4">
                                    <div class="row">
                                        <div class="col-12 d-flex justify-content-start p-3">
                                            <a href="{% url 'dashboard' %}" class="nav-link menu-link">Manage My Account</a>
                                        </div>

                                        <div class="col-12 d-flex justify-content-start p-3">
                                            <a href="{% url 'my_ticket_list' %}" class="nav-link menu-link ticket-link-active">My Tickets</a>
                                        </div>

                                        <div class="col-12 d-flex justify-content-start p-3">
                                            <a href="{% url 'complanints'%}" class="nav-link menu-link">Complaint</a>
                                        </div>

                                        <div class="col-12 d-flex justify-content-start p-3">
                                            <a href="{% url 'cancelticket' %}" class="nav-link menu-link">Ticket Cancellation</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Profile picture help block-->
                            <!--<div class="small font-italic text-muted mb-4">JPG or PNG no larger than 5 MB</div>-->
                            <!-- Profile picture upload button-->
                            <!--<button class="btn btn-primary profile-pic-btn" type="button">Upload new image</button>-->
                        </div>
                    </div>

                    <!-- Change password-->
                    <!--<div class="card mb-4 mb-xl-0 px-0 mt-2">
                        <div class="card-header password-card-header d-flex justify-content-center">Change Password</div>
                        <div id="password-card-body" class="card-body text-center password-card-body">
                            <div class="mb-3">
                                <label class="mb-1 ms-0" for="inputEmailAddress">Enter New Password</label>
                                <input class="form-control" id="inputStreetAddress" type="text" name="new_password" placeholder="Street Address" value="">
                            </div>
                            <div class="mb-3">
                                <label class="mb-1" for="inputEmailAddress">Confirm Password</label>
                                <input class="form-control" id="inputStreetAddress" type="text" name="confirm_password" placeholder="Street Address" value="">
                            </div>
                            
                            <button class="btn btn-primary" type="button">Change Password</button>
                        </div>
                    </div>-->
                </div>
                
            </div>
            <div class="col-xl-8 p-md-3 px-1">
                <!-- Account details card-->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-center">Ticket Details</div>
                    <div class="card-body">
                        <div class="tab-btn-group">
                            <div class="row justify-content-around">
                                <button type="button" class="btn tab-btn m-2">All Tickets</button>
                                <button type="button" class="btn tab-btn m-2">Booked</button>
                                <button type="button" class="btn tab-btn m-2">Paid</button>
                                <button type="button" class="btn tab-btn m-2">Cancelled</button>
                                <button type="button" class="btn tab-btn m-2">Expired</button>
                                <button type="button" class="btn tab-btn m-2">Reissued</button>
                            </div>
                        </div>
                    
                        <div class="content-box pt-3">
                            <div class="content">
                                {% for booking in booking_details %}
                                    <div class="inner-content pt-3 mb-3">
                                        <div class="row">
                                            <div class="col-6 px-4">
                                                <p><span class="route-name">{{ booking.start_point }} to {{ booking.end_point }}</span></p>
                                            </div>
                                            <div class="col-6 d-flex justify-content-end px-4">
                                                <p><span class="route-name">Status: {{booking.status}}</span></p>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-6">
                                                <div class="row">
                                                    <div class="col-12 px-4">
                                                        <p class="mb-0"><span class="ticket-name">Booking ID</span></p>
                                                    </div>
                                                    <div class="col-12 px-4">
                                                        <p><span class="ticket-text">{{booking.booking.id}}</span></p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-6">
                                                <div class="row">
                                                    <div class="col-12 px-4 d-flex justify-content-end">
                                                        <p class="mb-0"><span class="ticket-name">Total Fare</span></p>
                                                    </div>
                                                    <div class="col-12 px-4 d-flex justify-content-end">
                                                        <p><span class="ticket-text">BDT {{booking.total_fare}}</span></p>
                                                    </div>
                                                </div>
                                            </div>

                                            <!--<div class="col-3">
                                                <div class="row">
                                                    <div class="col-12 px-4">
                                                        <p class="mb-0"><span class="ticket-name">Booking Date</span></p>
                                                    </div>
                                                    <div class="col-12 px-4">
                                                        <p><span class="ticket-name">Aug-24-2023</span></p>
                                                    </div>
                                                </div>
                                            </div>-->

                                            <div class="col-lg-3 col-md-3 col-6">
                                                <div class="row">
                                                    <div class="col-12 px-4">
                                                        <p class="mb-0"><span class="ticket-name">Journey Date</span></p>
                                                    </div>
                                                    <div class="col-12 px-4">
                                                        <p><span class="ticket-text">{{booking.journey_date}}</span></p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-12 mb-md-0 mb-3">
                                                <div class="pe-md-4 pt-2">
                                                    <div class="row justify-content-md-end justify-content-center">
                                                        <button type="button" class="save-btn"><a href="{% url 'my_ticket_details' booking.booking.id %}">Details</a></button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                {% endfor %}

                            </div>

                            <div class="content">
                                {% for booking in booking_details %}
                                    {% if booking.status == 'Booked' %}
                                        <div class="inner-content pt-3 mb-3">
                                            <div class="row">
                                                <div class="col-6 px-4">
                                                    <p><span class="route-name">{{ booking.start_point }} to {{ booking.end_point }}</span></p>
                                                </div>
                                                <div class="col-6 d-flex justify-content-end px-4">
                                                    <p><span class="route-name">Status: {{booking.status}}</span></p>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking ID</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.booking.id}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Total Fare</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">BDT {{booking.total_fare}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--<div class="col-3">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-name">Aug-24-2023</span></p>
                                                        </div>
                                                    </div>
                                                </div>-->

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Journey Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.journey_date}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-12 mb-md-0 mb-3">
                                                    <div class="pe-md-4 pt-2">
                                                        <div class="row justify-content-md-end justify-content-center">
                                                            <button type="button" class="save-btn"><a href="">Details</a></button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}    
                            </div>

                            <div class="content">
                                {% for booking in booking_details %}
                                    {% if booking.status == 'Paid' %}
                                        <div class="inner-content pt-3 mb-3">
                                            <div class="row">
                                                <div class="col-6 px-4">
                                                    <p><span class="route-name">{{ booking.start_point }} to {{ booking.end_point }}</span></p>
                                                </div>
                                                <div class="col-6 d-flex justify-content-end px-4">
                                                    <p><span class="route-name">Status: {{booking.status}}</span></p>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking ID</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.booking.id}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Total Fare</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">BDT {{booking.total_fare}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--<div class="col-3">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-name">Aug-24-2023</span></p>
                                                        </div>
                                                    </div>
                                                </div>-->

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Journey Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.journey_date}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-12 mb-md-0 mb-3">
                                                    <div class="pe-md-4 pt-2">
                                                        <div class="row justify-content-md-end justify-content-center">
                                                            <button type="button" class="save-btn"><a href="">Details</a></button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}    
                            </div>

                            <div class="content">
                                {% for booking in booking_details %}
                                    {% if booking.status == 'Cancelled' %}
                                        <div class="inner-content pt-3 mb-3">
                                            <div class="row">
                                                <div class="col-6 px-4">
                                                    <p><span class="route-name">{{ booking.start_point }} to {{ booking.end_point }}</span></p>
                                                </div>
                                                <div class="col-6 d-flex justify-content-end px-4">
                                                    <p><span class="route-name">Status: {{booking.status}}</span></p>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking ID</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.booking.id}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Total Fare</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">BDT {{booking.total_fare}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--<div class="col-3">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-name">Aug-24-2023</span></p>
                                                        </div>
                                                    </div>
                                                </div>-->

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Journey Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.journey_date}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-12 mb-md-0 mb-3">
                                                    <div class="pe-md-4 pt-2">
                                                        <div class="row justify-content-md-end justify-content-center">
                                                            <button type="button" class="save-btn"><a href="">Details</a></button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}    
                            </div>

                            <div class="content">
                                {% for booking in booking_details %}
                                    {% if booking.status == 'Expired' %}
                                        <div class="inner-content pt-3 mb-3">
                                            <div class="row">
                                                <div class="col-6 px-4">
                                                    <p><span class="route-name">{{ booking.start_point }} to {{ booking.end_point }}</span></p>
                                                </div>
                                                <div class="col-6 d-flex justify-content-end px-4">
                                                    <p><span class="route-name">Status: {{booking.status}}</span></p>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking ID</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.booking.id}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Total Fare</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">BDT {{booking.total_fare}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--<div class="col-3">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-name">Aug-24-2023</span></p>
                                                        </div>
                                                    </div>
                                                </div>-->

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Journey Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.journey_date}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-12 mb-md-0 mb-3">
                                                    <div class="pe-md-4 pt-2">
                                                        <div class="row justify-content-md-end justify-content-center">
                                                            <button type="button" class="save-btn"><a href="">Details</a></button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}    
                            </div>

                            <div class="content">
                                {% for booking in booking_details %}
                                    {% if booking.status == 'Reissued' %}
                                        <div class="inner-content pt-3 mb-3">
                                            <div class="row">
                                                <div class="col-6 px-4">
                                                    <p><span class="route-name">{{ booking.start_point }} to {{ booking.end_point }}</span></p>
                                                </div>
                                                <div class="col-6 d-flex justify-content-end px-4">
                                                    <p><span class="route-name">Status: {{booking.status}}</span></p>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking ID</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.booking.id}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Total Fare</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">BDT {{booking.total_fare}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--<div class="col-3">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Booking Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-name">Aug-24-2023</span></p>
                                                        </div>
                                                    </div>
                                                </div>-->

                                                <div class="col-lg-3 col-md-3 col-6">
                                                    <div class="row">
                                                        <div class="col-12 px-4">
                                                            <p class="mb-0"><span class="ticket-name">Journey Date</span></p>
                                                        </div>
                                                        <div class="col-12 px-4">
                                                            <p><span class="ticket-text">{{booking.journey_date}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-12 mb-md-0 mb-3">
                                                    <div class="pe-md-4 pt-2">
                                                        <div class="row justify-content-md-end justify-content-center">
                                                            <button type="button" class="save-btn"><a href="">Details</a></button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}    
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"></script>
    
    <script>
        $(document).ready(function(){
            var tabs = document.querySelectorAll(".tab-btn")
            var allContent = document.querySelectorAll(".content")

            tabs[0].classList.add('tab-active')
            allContent[0].classList.add('tab-active')

            tabs.forEach((tab, index) => {
                tab.addEventListener("click", () => {
                    tabs.forEach(tab => {
                        tab.classList.remove("tab-active")
                    });
                    tab.classList.add("tab-active");
                    allContent.forEach(content => (
                        content.classList.remove("tab-active")
                    ))
                    allContent[index].classList.add("tab-active");
                })
            })
            
        });
    </script>
    

{% endblock js %}
