{% extends 'base.html' %}
{% load static %}
{% block custom_css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css" integrity="sha512-9YHSK59/rjvhtDcY/b+4rdnl0V4LPDWdkKceBl8ZLF5TB6745ml1AfluEU6dFWqwDw9lPvnauxFgpKvJqp7jiQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css" integrity="sha512-SgaqKKxJDQ/tAUAAXzvxZz33rmn7leYDYfBP+YoMRSENhf3zJyx3SBASt/OfeQwBHA1nxMis7mM3EV/oYT6Fdw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <link rel="stylesheet" href={% static "css/ticket_booking.css"%}>
{% endblock custom_css %}

{% block page_title %}<title>Payment Gateway</title>{% endblock page_title %}
{% block content %}
    <section class="relative about-banner">
        <div class="overlay overlay-bg"></div>
    
        <div class="container">				
            <div class="row d-flex align-items-center justify-content-center">
            
                <div class="about-content col-lg-12">
                    <br><br>  <br><br><br><br>
                    <h1 class="text-white">Bus Choice</h1>	
                    <p class="text-white link-nav">{{route_part.start_point}} </a>  <span class="lnr lnr-arrow-right"></span>  {{route_part.end_point}}</a></p>
                    <h4 class="text-white link-nav">{{journey_date}}</h4>
                </div>	
            </div>
        </div>
    </section>
    
    <div class="container-xl px-4 mt-4">
        <div class="container-fluid">
            <div class="row justify-content-center">
                <form action="{% url 'booking' bus_number=bus.bus_number coach_number=coach.coachnumber journey_date=journey_date route_id=route_id route_part_id=route_part_id %}" method="post">
                    {% csrf_token %}
                    <div class="col-md-12 px-0">    
                        <div class="card card-primary">
                            <div class="card-header d-flex justify-content-center">
                                <h3 class="card-title">Booking Details</h3>
                            </div>
                            {% if messages %}
                                <ul class="messages">
                                    {% for message in messages %}
                                        <li class="success">{{ message }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}  
                        
                            <div class="inner-card mt-4">
                                <div class="row">
                                    <div class="journey-details col-12 px-md-3 px-1">
                                        <div class="trip-info-div mb-4 px-2">
                                            <div class="row">
                                                <div class="d-flex justify-content-center col-12 mb-4 pt-3">
                                                    <span class="information-heading">Journey Information</span>
                                                </div>
            
                                                <div class="ticket-detail-journey col-lg-2 col-md-4 col-6">
                                                    <div class="ticket-detail-column p-2">
                                                        <div class="inner-card-heading-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Coach Name</span></p>
                                                        </div>
                                                        <div class="inner-card-text-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ coach.coachmodelname }}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
            
                                                <div class="ticket-detail-journey col-lg-2 col-md-4 col-6">
                                                    <div class="ticket-detail-column p-2">
                                                        <div class="inner-card-heading-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Journey Date</span></p>
                                                        </div>
                                                        <div class="inner-card-text-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ journey_date }}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
            
                                                <div class="ticket-detail-journey col-lg-2 col-md-4 col-6">
                                                    <div class="ticket-detail-column p-2">
                                                        <div class="inner-card-heading-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Journey Route</span></p>
                                                        </div>
                                                        <div class="inner-card-text-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ route_part.start_point }} &rarr; {{ route_part.end_point }}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
            
                                                <div class="ticket-detail-journey col-lg-2 col-md-4 col-6">
                                                    <div class="ticket-detail-column p-2">
                                                        <div class="inner-card-heading-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Boarding Point</span></p>
                                                        </div>
                                                        <div class="inner-card-text-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ selected_boarding_point.point_name }}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
            
                                                <div class="ticket-detail-journey col-lg-2 col-md-4 col-6">
                                                    <div class="ticket-detail-column p-2">
                                                        <div class="inner-card-heading-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Departure Time</span></p>
                                                        </div>
                                                        <div class="inner-card-text-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ coach.depraturetime}}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
            
                                                <div class="ticket-detail-journey col-lg-2 col-md-4 col-6">
                                                    <div class="ticket-detail-column p-2">
                                                        <div class="inner-card-heading-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Dropping Point</span></p>
                                                        </div>
                                                        <div class="inner-card-text-div">
                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ coach.droping_point }}</span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
        
                                        <div class="trip-info-div col-lg-12 col-md-12 col-12 px-2 mb-4">
                                            <!--Passenger details-->
                                            <div class="row">
                                                <div class="d-flex justify-content-center col-12 mb-4 pt-3">
                                                    <span class="information-heading">Passenger Information</span>
                                                </div>
                                                {% if user.is_authenticated %}
                                                    <div>
                                                        <div class="row">
                                                            <div class="ticket-detail col-lg-2 col-md-4 col-6">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">First Name</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-text">{{ user.first_name }}</span></p>
                                                                    </div>
                                                                </div>
                                                            </div>
                    
                                                            <div class="ticket-detail col-lg-2 col-md-4 col-6">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Last Name</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-text">{{ user.last_name }}</span></p>
                                                                    </div>
                                                                </div>
                                                            </div>
                    
                                                            <div class="ticket-detail col-lg-2 col-md-4 col-12">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Email</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-text">{{ user.email }}</span></p>
                                                                    </div>
                                                                </div>
                                                            </div>
                    
                                                            <div class="ticket-detail col-lg-2 col-md-4 col-6">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Phone</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-text">{{ user.phone_number }}</span></p>
                                                                    </div>
                                                                </div>
                                                            </div>
                    
                                                            <div class="ticket-detail col-lg-2 col-md-4 col-6">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Selected Seats</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <p class="py-2 mb-0"><span class="inner-card-text">{{ selected_seat }}</span></p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                {% else %}
                                                <div class="form-check form-switch all-passenger-seat mx-auto w-auto mb-4">
                                                    <input class="form-check-input input-passenger-check" type="checkbox" id="same-seats">
                                                    <label class="form-check-label passenger-seat-selection-checkbox" for="same-seats">Associate all seats with same passenger</label>
                                                </div>
                                                <div id="one-passenger-info" class="one-passenger-info">
                                                    <div class="row mb-2">
                                                        <div class="ps-md-5 ps-4 mb-2">
                                                            <div class="seat-number-div p-2 d-flex justify-content-center">
                                                                <span>Seat# {{ selected_seat }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="passengerRowTemplate" class="passengerRowTemplate mb-4 px-md-3">
                                                        <div class="row">
                                                            <div class="ticket-detail">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div mb-2">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Name</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <input type="text" id="first_name_{{ selected_seat }}" class="form-control" name="first_name" placeholder="First Name" required>
                                                                    </div>
                                                                </div>
                                                            </div>
                    
                                                            <div class="ticket-detail">
                                                                <div class="ticket-detail-column p-2 mb-2">
                                                                    <div class="inner-card-heading-div mb-2">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Email</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <input type="email" id="email_{{ selected_seat }}" class="form-control" name="email" placeholder="Email" required>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="ticket-detail ticket-detail-address">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div mb-2">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Address</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <input type="text" id="last_name_{{ selected_seat }}" class="form-control" name="last_name" placeholder="Last Name" required>
                                                                    </div>
                                                                </div>
                                                            </div>
                    
                                                            <div class="ticket-detail">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div mb-2">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Phone</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div">
                                                                        <input type="tel" id="phone_{{ selected_seat }}" class="form-control" name="phone" placeholder="Mobile/Phone" required>
                                                                    </div>
                                                                    <p id="phoneError" class="text-danger"></p>
                                                                </div>
                                                            </div>
                                                            <div class="ticket-detail">
                                                                <div class="ticket-detail-column p-2">
                                                                    <div class="inner-card-heading-div mb-2">
                                                                        <p class="py-2 mb-0"><span class="inner-card-heading">Gender</span></p>
                                                                    </div>
                                                                    <div class="inner-card-text-div d-flex">
                                                                        <input type="radio" id="male_{{ seat_no }}" checked="checked" name="gender_{{ seat_no }}" class="gender">
                                                                        <label for="male_{{ seat_no }}">Male</label>
                                                                        <input type="radio" id="female_{{ seat_no }}" name="gender_{{ seat_no }}" class="gender">
                                                                        <label for="female_{{ seat_no }}">Female</label>
                                                                        <input type="radio" id="others_{{ seat_no }}" name="gender_{{ seat_no }}" class="gender">
                                                                        <label for="others_{{ seat_no }}">Others</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                </div>

                                                {% for seat_no in selected_seat_list %}
                                                    <div id="passenger-info" class="passenger-info">
                                                        <div class="row mb-2">
                                                            <div class="col-6 ps-md-5 ps-4">
                                                                <div class="seat-number-div p-2 d-flex justify-content-center">
                                                                    <span>Seat# {{ seat_no }}</span>
                                                                </div>
                                                            </div>
                                                            {% if forloop.first %}
                                                                <div class="d-none col-6">
                                                                    <input class="form-check-input" type="checkbox" value="" id="{{ seat_no }}">
                                                                </div>
                                                            {% else %}
                                                                <div class="form-check px-md-5 mb-3 col-6">
                                                                    <input class="form-check-input" type="checkbox" value="" id="{{ seat_no }}">
                                                                    <label class="form-check-label individual-seat-label" for="{{ seat_no }}">
                                                                        Same as above
                                                                    </label>
                                                                </div>
                                                            {% endif %}
                                                        </div>
                                                        
                                                        <div id="passengerRowTemplate" class="passengerRowTemplate mb-4 px-md-3">
                                                            <div class="row">
                                                                <!--<div class="ticket-detail col-lg-2 col-md-2 col-6">
                                                                    <div class="ticket-detail-column p-2">
                                                                        <div class="inner-card-heading-div">
                                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Selected Seats</span></p>
                                                                        </div>
                                                                        <div class="inner-card-text-div">
                                                                            <p class="py-2 mb-0"><span class="inner-card-text">{{ seat_no }}</span></p>
                                                                        </div>
                                                                    </div>
                                                                </div>-->

                                                                <div class="ticket-detail">
                                                                    <div class="ticket-detail-column p-2">
                                                                        <div class="inner-card-heading-div mb-2">
                                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Name</span></p>
                                                                        </div>
                                                                        <div class="inner-card-text-div">
                                                                            <input type="text" id="first_name_{{ seat_no }}" class="form-control" name="first_name" placeholder="First Name" required>
                                                                        </div>
                                                                    </div>
                                                                </div>
                        
                                                                <div class="ticket-detail">
                                                                    <div class="ticket-detail-column p-2 mb-2">
                                                                        <div class="inner-card-heading-div mb-2">
                                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Email</span></p>
                                                                        </div>
                                                                        <div class="inner-card-text-div">
                                                                            <input type="email" id="email_{{ seat_no }}" class="form-control" name="email" placeholder="Email" required>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="ticket-detail ticket-detail-address">
                                                                    <div class="ticket-detail-column p-2">
                                                                        <div class="inner-card-heading-div mb-2">
                                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Address</span></p>
                                                                        </div>
                                                                        <div class="inner-card-text-div">
                                                                            <input type="text" id="last_name_{{ seat_no }}" class="form-control" name="last_name" placeholder="Last Name" required>
                                                                        </div>
                                                                    </div>
                                                                </div>
                        
                                                                <div class="ticket-detail">
                                                                    <div class="ticket-detail-column p-2">
                                                                        <div class="inner-card-heading-div mb-2">
                                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Phone</span></p>
                                                                        </div>
                                                                        <div class="inner-card-text-div">
                                                                            <input type="tel" id="phone_{{ selected_seat }}" class="form-control" name="phone" placeholder="Mobile/Phone" required>
                                                                        </div>
                                                                        <p id="phoneError" class="text-danger"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="ticket-detail">
                                                                    <div class="ticket-detail-column p-2">
                                                                        <div class="inner-card-heading-div mb-2">
                                                                            <p class="py-2 mb-0"><span class="inner-card-heading">Gender</span></p>
                                                                        </div>
                                                                        <div class="inner-card-text-div d-flex">
                                                                            <input type="radio" id="male_{{ seat_no }}" checked="checked" name="gender_{{ seat_no }}" class="gender">
                                                                            <label for="male_{{ seat_no }}">Male</label>
                                                                            
                                                                            <input type="radio" id="female_{{ seat_no }}" name="gender_{{ seat_no }}" class="gender">
                                                                            <label for="female_{{ seat_no }}">Female</label>

                                                                            <input type="radio" id="others_{{ seat_no }}" name="gender_{{ seat_no }}" class="gender">
                                                                            <label for="others_{{ seat_no }}">Others</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
            
                                                                <!--<div class="form-group form-group-box col-md-2 col-6" onclick="toggleSeatMenu()">
                                                                    <div class="dropdown-menu-box" aria-labelledby="selectseat">
                                                                    <select class="form-control passenger-seat-selection" name="passenger_seat_selection[]" onchange="updateSelectedSeats(this.value)">
                                                                        {% for seat in selected_seats_list %}
                                                                            <option value="{{ seat }}">{{ seat }}</option>
                                                                        {% endfor %}
                                                                    </select>
                                                                    </div>
                                                                </div>-->
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                                
                                                {% endif %}
                                            </div>

                                            <!--<div class="pb-4">
                                                <div class="d-flex justify-content-center">
                                                    <button type="button" class="btn save-btn" id="addPassengerBtn">Add More Passenger</button>
                                                </div>
                                            </div>-->
                                            <!--Passenger details-->
                                        </div>
                                    </div>

                                    <!--Ticket details, right div-->
                                    <div class="journey-details col-12 px-md-3 px-2">
                                        <div class="row">
                                            <div class="col-md-6 col-12 mb-4 px-2">
                                                <div class="trip-info-div p-2">
                                                    <div class="row">
                                                        <div class="d-flex justify-content-center col-12 mb-4 pt-3">
                                                            <span class="information-heading">Ticket details</span>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">Coach number</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">{{ coach.coachnumber }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">PNR</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">{{ pnr }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">Seat No.</span></p>
                                                                <input type="hidden" class="form-control" id="selected_seat" name="seat_number" value="{{ selected_seat }}" readonly>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">{{ selected_seat }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">Price per ticket</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">BDT {{ route_part.price }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">Total Fare</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">BDT {{ selected_price }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">Service Charge</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">BDT 1000.00</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 ps-md-5 ps-3">
                                                                <p><span class="booking-info-heading">VAT</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 pe-md-5 pe-3">
                                                                <p><span class="booking-info-text">BDT {{ tax_amount }}</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr class="mt-0">
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="d-flex justify-content-start col-6 px-md-5 px-3 mb-4">
                                                                <p><span class="booking-info-heading">Total Amount</span></p>
                                                            </div>
            
                                                            <div class="d-flex justify-content-end col-6 px-md-5 px-3">
                                                                <p><span class="booking-info-text">BDT {{ total_payable_amount_str }}</span></p>
                                                                <input type="hidden" class="form-control" id="selected_price" name="price" value="{{ selected_price }}" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!--Payment images-->
                                            <div class="col-md-6 col-12 mb-4 px-2">
                                                <div class="trip-info-div py-5 px-2">
                                                    <div class="px-4 mb-4">
                                                        <div class="row justify-content-center px-1">
                                                            <div class="visa-img-div mt-3">
                                                                <img class="payment-img visa-img" src="{% static 'img/visa-mastercard.png' %}" alt="">
                                                            </div>
        
                                                            <div class="visa-img-div">
                                                                <img class="payment-img visa-img" src="{% static 'img/bkash1.png' %}" alt="">
                                                            </div>
        
                                                            <div class="visa-img-div">
                                                                <img class="payment-img visa-img" src="{% static 'img/nagad1.png' %}" alt="">
                                                            </div>

                                                            <div class="visa-img-div">
                                                                <img class="payment-img visa-img" src="{% static 'img/aex.jpg' %}" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row justify-content-between">
                                                            <div class="form-check col-6 mb-4 ps-5">
                                                                <input class="form-check-input" type="radio" name="radio-group" id="radio1">
                                                                <label class="form-check-label booking-info-heading" for="radio1">
                                                                    Pay now
                                                                </label>
                                                            </div>
                                                            <div class="form-check col-6 pe-5">
                                                                <input class="form-check-input" type="radio" name="radio-group" id="radio2" checked>
                                                                <label class="form-check-label booking-info-heading" for="radio2">
                                                                    Book Only
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div>
                                                        <div class="row">
                                                            <div class="col-12 px-5">
                                                                <p><span class="booking-info-heading">Choose a payment method</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
        
                                                    <div class="pb-4">
                                                        <div class="d-flex justify-content-center">
                                                            <button class="btn save-btn">Purchase Ticket</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <!--Ticket details-->
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}


    {% block js %}
        <script>
            $(document).ready(function() {
                // Add a change event listener to all "Same as above" checkboxes
                $('input[type="checkbox"]').change(function() {
                    if ($(this).is(':checked')) {
                        console.log('checked')
                        // Get the ID of the current checkbox and the previous row
                        var currentId = $(this).attr('id');
                        
                        // Get the ID of the previous row's checkbox
                        var previousRow = $(this).closest('.passenger-info').prev();
                        var previousId = previousRow.find('input[type="checkbox"]').attr('id');

                        console.log('current id: ', currentId)
                        console.log('previousRow: ', previousRow)
                        console.log('previous id: ', previousId) 
        
                        // Copy values from previous row's input fields to the current row
                        $('#first_name_' + currentId).val($('#first_name_' + previousId).val());
                        $('#last_name_' + currentId).val($('#last_name_' + previousId).val());
                        $('#email_' + currentId).val($('#email_' + previousId).val());
                        $('#phone_' + currentId).val($('#phone_' + previousId).val());

                        if($('#male_' + previousId).prop("checked")){
                            $("#male_" + currentId).prop("checked", true);
                        }
                        else if($('#female_' + previousId).prop("checked")){
                            $("#female_" + currentId).prop("checked", true);
                        }
                        else if($('#others_' + previousId).prop("checked")){
                            $("#others_" + currentId).prop("checked", true);
                        }

                        /*$('#male_' + currentId).val($('#male_' + previousId).val());
                        $('#female_' + currentId).val($('#female_' + previousId).val());
                        $('#others_' + currentId).val($('#others_' + previousId).val());*/
                    }
                });

                // Function to hide/show the passenger info div based on the checkbox state
                function togglePassengerInfo() {
                    var sameSeatsCheckbox = $('#same-seats');
                    var onePassengerInfo = $('#one-passenger-info');
                    var passengerInfo = $('.passenger-info');

                    if (sameSeatsCheckbox.is(':checked')) {
                        onePassengerInfo.slideDown();
                        passengerInfo.slideUp();

                        // Clear all input fields inside passenger-info
                        clearInputs(passengerInfo);
                    }
                    else {
                        onePassengerInfo.slideUp();
                        passengerInfo.slideDown();

                        // Clear all input fields inside all-passenger-info
                        clearInputs(onePassengerInfo);
                    }
                }

                // Function to clear all input fields inside a given element
                function clearInputs(container) {
                    container.find('input').val('');
                }

                // Attach a change event listener to the same-seats checkbox
                $('#same-seats').change(togglePassengerInfo);

                // Initial call to set the initial state
                togglePassengerInfo();
            });
        </script>
        <script>
            const availableSeats = [{% for seat in selected_seats_list %}"{{ seat }}",{% endfor %}];
            const maxPassengers = availableSeats.length;
            
            let addedPassengerCount = 1; // Start with 1 form already shown
            
            function updateSelectedSeats(selectedSeat) {
                availableSeats.splice(availableSeats.indexOf(selectedSeat), 1); // Remove the selected seat
                const seatSelections = document.querySelectorAll('.passenger-seat-selection');
                seatSelections.forEach((select) => {
                const options = select.options;
                for (let i = 0; i < options.length; i++) {
                    if (selectedSeat !== '' && selectedSeat !== options[i].value) {
                    options[i].disabled = true;
                    }
                }
                });
            }
            
            document.getElementById("addPassengerBtn").addEventListener("click", addPassengerForms);
            
            function addPassengerForms() {
                if (addedPassengerCount >= maxPassengers) {
                alert("Maximum passenger limit reached.");
                return;
                }
            
                const passengerRowTemplate = document.getElementById("passengerRowTemplate");
                const passengerDetailsTable = document.getElementById("passengerDetailsTable");
            
                const newRow = passengerRowTemplate.cloneNode(true);
                newRow.removeAttribute("id");

                // Clear input fields in the new row (optional)
                var inputFields = newRow.querySelectorAll("input, select");
                inputFields.forEach(function(input) {
                    input.value = ""; // Clear input values
                });

                document.getElementById("passenger-info").appendChild(newRow);
            
                // Enable only available seat options for the new passenger
                const seatSelection = newRow.querySelector('.passenger-seat-selection');
                const options = seatSelection.options;
                for (let j = 0; j < options.length; j++) {
                    options[j].disabled = false;
                    if (availableSeats.includes(options[j].value)) {
                        options[j].disabled = false;
                    }
                    else {
                        options[j].disabled = true;
                    }
                }
            
                /*newRow.style.display = ""; // Show the new row
                passengerDetailsTable.appendChild(newRow);*/
            
                addedPassengerCount++;
            
                if (addedPassengerCount >= maxPassengers) {
                document.getElementById("addPassengerBtn").disabled = true;
                }
            }
            </script>

        <script>
        // Assuming the value of selected_price is retrieved dynamically
        var selected_price = "{{ selected_price }}"; // Replace with the actual value

        // Calculating the total
        var total = parseInt(selected_price) + 100;

        // Displaying the total in the HTML
        var totalAmountElement = document.getElementById("totalAmount");
        totalAmountElement.textContent = +total;
        </script>

    <script>
    function addPassenger() {
        var passengerRow = document.getElementById("passengerRow");
        var newRow = passengerRow.cloneNode(true);
        document.getElementById("passengerDetailsTable").appendChild(newRow);
    }
    </script>
    
{% endblock js %}

